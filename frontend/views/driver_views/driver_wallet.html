<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vaahan - Manage Wallet</title>
  <link rel="stylesheet" href="../../assets/css/style.css" />
  <script src="../../assets/js/dwallet.js" defer></script>
</head>
<body>

<header class="header">
  <div class="logo">ðŸš— Vaahan</div>
  <nav class="header-nav">
    <a href="#home" class="nav-link">Home</a>
    <a href="/RideApp-CapstoneProject/frontend/index.html" class="nav-link">Logout</a>
    <a href="./profile.html" class="nav-link"><div class="profile-pic">P</div></a>
    <button class="sos-btn">SOS</button>
  </nav>
</header>

<aside class="sidebar">
  <ul class="sidebar-menu">
    <li class="sidebar-item"><a href="checkRides.html" class="sidebar-link">Check Rides</a></li>
    <li class="sidebar-item"><a href="startRide.html" class="sidebar-link">Start a Ride</a></li>
    <li class="sidebar-item"><a href="./addVehicle.html" class="sidebar-link">Add Vehicle</a></li>
    <li class="sidebar-item"><a href="#" class="sidebar-link">My Earnings</a></li>
    <li class="sidebar-item"><a href="#" class="sidebar-link active">Payment & Wallet</a></li>
  </ul>
</aside>

<main class="main-content">
  <h1>Manage Wallet ðŸ’³</h1>

  <!-- Wallet Info -->
  <div class="welcome-card">
    <p><strong>Wallet ID:</strong> <span id="walletId">Loading...</span></p>
    <p><strong>Balance:</strong> â‚¹ <span id="walletBalance">0</span></p>

    <div class="wallet-buttons">
      <button id="createWalletBtn" class="request-btn">Create Wallet</button>
      <!-- Both buttons are present so same page works for rider or driver -->
      <!-- <button id="addMoneyBtn" class="request-btn" disabled>Add Money</button> -->
      <button id="withdrawMoneyBtn" class="request-btn" disabled>Withdraw Money</button>
      <button id="viewTransactionsBtn" class="request-btn" disabled>View Transactions</button>
    </div>
  </div>

  <!-- Create Wallet -->
  <div id="createWalletForm" style="display:none; margin-top:12px;">
    <label for="newPin">4-digit PIN</label>
    <input type="password" id="newPin" maxlength="4" />
    <div style="margin-top:8px;">
      <button id="proceedCreateWallet" class="request-btn">Create</button>
      <button id="cancelCreateWallet" class="request-btn outline">Cancel</button>
    </div>
  </div>

  <!-- Add Money Step 1 -->
  <div id="addMoneyFormStep1" style="display:none; margin-top:12px;">
    <label for="amount">Amount</label>
    <input type="number" id="amount" min="1" />
    <label for="pin">Wallet PIN</label>
    <input type="password" id="pin" maxlength="4" />
    <div style="margin-top:8px;">
      <button id="proceedAddMoney" class="request-btn">Proceed</button>
      <button id="cancelAddMoney1" class="request-btn outline">Cancel</button>
    </div>
  </div>

  <!-- Add Money Step 2 (Razorpay txn id) -->
  <div id="addMoneyFormStep2" style="display:none; margin-top:12px;" data-txn-id="">
    <label for="txnId">Razorpay Transaction ID</label>
    <input type="text" id="txnId" />
    <div style="margin-top:8px;">
      <button id="confirmAddMoney" class="request-btn">Verify & Add Money</button>
      <button id="cancelAddMoney2" class="request-btn outline">Cancel</button>
    </div>
  </div>

  <!-- Withdraw Money -->
  <div id="withdrawMoneyForm" style="display:none; margin-top:12px;">
    <label for="withdrawAmount">Amount</label>
    <input type="number" id="withdrawAmount" min="1" />
    <label for="withdrawPin">Wallet PIN</label>
    <input type="password" id="withdrawPin" maxlength="4" />
    <div style="margin-top:8px;">
      <button id="proceedWithdraw" class="request-btn">Withdraw</button>
      <button id="cancelWithdraw" class="request-btn outline">Cancel</button>
    </div>
  </div>

  <!-- Transactions -->
  <div id="transactionsSection" style="display:none; margin-top:12px;">
    <h3>Transactions</h3>
    <table>
      <thead>
        <tr><th>Date</th><th>Credit</th><th>Debit</th><th>Status</th></tr>
      </thead>
      <tbody id="transactionsList"></tbody>
    </table>
  </div>

</main>

<footer class="footer">
  <p>Â© 2025 Vaahan. All rights reserved.</p>
</footer>

</body>
</html>
